# island architecture

아일랜드 아키텍처를 이용하면 서버렌더링 되는 웹 앱 내에서 작은 단위의 인터랙트에 집중한 분리된 코드 조각을 만들게 됩니다.

아일랜드 아키텍처는 점진적으로 향상되는 html을 만들어낼 수 있습니다.

아일랜드의 상호작용을 위한 스크립트들은 독립적으로 클라이언트에 전송되고 하이드레이션되며

그외의 나머지 페이지들은 정적 html로 렌더링되게 됩니다.

# rehydration

리하이드레이션은 서버렌더링 이후 클라이언트 측에서 UI 컴포넌트들의 상태를 재생성하는 과정입니다.

이러한 리하이드레이션에도 비용이 존재하기 때문에 이런 부분들을 스트리밍 처리를 통해 해결하고는 있지만

결국 자바스크립트를 클라이언트에 쏴줘야한다는 점에서는 같다.

# 그럼 아일랜드는?

상호작용이 가능한 요소들을 "아일랜드"라는 개념으로 생각하는 것을 통해 클라이언트에 독립적으로 전송하고

그 외에는 정적 html을 사용하는 방식을 통해서 클라이언트에 전송해야하는 자바스크립트를 최소화하는 것을 목표로 합니다.

즉 상호작용이 필요없는 곳이라면 js도 필요없고 하이드레이션도 필요없으니 그냥 정적으로 만들면 되지 않겠냐는 발상인 것이지요

# 동적 컴포넌트의 아일랜드

대부분의 페이지는 정적 콘텐츠와 동적 콘텐츠의 조합이라고 정의할 수 있습니다.

일반적으로는 페이지는 분리될 수 있는 상호작용 가능 영역과 정적콘텐츠로 구성되는데요

정적 콘텐츠는 리하이드레이션이 필요없지만 동적 콘텐츠들은 하이드레이션이 필요합니다.

버츄얼돔, 리하이드레이션, 이벤트핸들러와 같은 자바스크립트 코드들은 번들 사이즈를 키웁니다

<br/>

# 아일랜드 아키텍처 구현

하이드레이팅 스케줄러를 구현하기 위해서는 requestIdleCallback()을 사용하는것이 권장됩니다.

아일랜드 아키텍처를 구현하기 위해서는 정적 동형 렌더링과 컴포넌트 레벨의 부분 하이드레이션 스케줄링이 필요한데요

따라서 아일랜드 프레임워크들은 다음과 같은 요구사항을 풀어야합니다.

1. 클라이언트 측에 추가 자바스크립트 전송 없이 서버에서 정적 콘텐츠 렌더링하는것을 지원해야한다.

2. 정적 콘텐츠를 만들 때 플레이스홀더를 통해 독립적인 동적 컴포넌트를 임베드할 수 있어야한다.

각 동적인 컴포넌트는 자기자신을 하이드레이트하는 스크립트를 포함하고 있어야하며 이 스크립트들은 requestIdleCallback을 통해 메인 스레드가 유휴상태일때 실행되어야한다.

3. 컴포넌트의 동형 렌더링을 지원하며 서버에서 렌더링되고 클라이언트에서 하이드레이션될 수 있어야한다.

# 장점

클라이언트에 보내는 자바스크립트의 크기가 줄어들 수 있습니다.

자바스크립트는 오직 상호작용이 가능한 컴포넌트를 위해서만 포함됩니다.

# 단점

아일랜드 아키텍처를 사용하기 위해서 선택할 수 있는 프레임워크가 제한적이다.

기존에 존재하는 앱을 마이그레이션 하기 위해 많은 노력이 든다.
