저자가 첫장부터 이미 소프트웨어 테스트의 중요성에 대해 논쟁할 필요가 없다.라는 선언을 하는것이 흥미로웠다.

그리고 개발자가 테스트 도구를 다루는 것에는 능숙해졌지만 테스트 기법을 체계적으로 적용해서 버그를 찾는 목적으로는 사용하지 않는다는 내용도 흥미롭다.

사실 나도 테스트의 장점을 이야기할 때 빠르게 돌아오는 피드백이 장점이라는 이야기를 많이 하는데

테스트는 버그 찾기가 전부라는 관점으로 이야기하는 것이 재미가 있는 부분이다.

예제 코드가 자바로 이루어져있어 프론트엔드 개발자인 나로서는 완전히 코드의 동작 방식까지 이해하기는 어려운 면이 있지만

결국 잘 쓰인 코드는 마치 글처럼 읽히기에 글을 읽는다는 느낌으로만 읽어보았다.

아마 자바를 쓰는 개발자라면 좀 더 와닿지 않을까? 하는 근거없는 예상을 해본다.

## 도메인 테스트

요구사항을 작은 부분으로 나누고 테스트 케이스를 도출해내는 것을 도메인 테스트라고 부른다.

## 구조적 테스트

명세를 완성하고 나서는 코드에 초점을 맞추어 구조적 테스트를 통해 현재의 테스트 케이스가 충분한지 평가했다 (코드 커버리지를 이야기하는 듯 하다)

## 예시기반 테스트

테스를 위해 한가지 데이터 포인트를 고르는 것을 의미한다. << 솔직히 잘 모르겠다



# 개발과정에서 효율적으로 테스트하기

1. 기능 개발은 개발자가 요구사항을 받는것으로부터 주로 시작한다.

이 때 요구사항은 자연어로 작성되어 있고 개발자가 이해를 하고 나면 코드를 작성한다.

2. 개발자는 짧은 TDD를 반복한다. 이 과정에서 자신이 작성한 코드가 타당한지 피드백을 얻는다. 또한 이 과정에서 리팩토링도 수행한다.

3. 종종 요구사항은 복잡해서 하나의 클래스나 메서드로 구현할 수 없다.

그래서 개발자는 여러 단위의 클래스나 메서드를 만들게 되는데 이런 경우에는 테스트에이블하게 설계하는것을 염두하고 코드를 설계해야한다.

## 테스트 작성은 연습이 관건이다.

테스트 케이스를 작성하는게 익숙해지면 익숙해질수록 테스트를 더 빠르게 작성할 수 있다.


## 효율적인 테스트를 써야한다.

자원이 무한정 있어도 모든 상황을 테스트하는 건 불가능할 수 있다.

따라서 무엇을 테스트할지를 선택해야한다.

## 살충제역설

단위 테스트에만 의존하는 팀은 단위 테스트 수준에서 잡을 수 있는 버그를 다 찾아낼 수 있다.

하지만 통합 테스트 수준에서만 발생하는 버그를 놓칠 수 있을 것이다.

이렇듯 벌레를 예방하고 잡으려고 사용하는 모든 방법은 그 효과가 미치지 못하는 더 미묘한 벌레를 남긴다는 것이 살충제 역설이다

## 버그가 많이 발생하는 포인트가 있다.

예를 들면 결제 모듈은 마케팅 모듈보다 훨씬 엄격하게 테스트해야한다.

이러한 경향을 결함 클러스터링이라고 부른다.

# 테스트 피라미드

굉장히 유명한데 단위, 통합, 시스템 테스트가 있다.

## 단위 테스트

단위를 격리해서 테스트하는 것을 단위 테스트라고 부른다

단위 테스트의 장점은 다음과 같다.

1. 단위 테스트는 빠르다.

2. 단위 테스트는 다루기 쉽다.

3. 단위 테스트는 작성하기도 쉽다.

단위 테스트의 단점은 다음과 같다.

1. 단위 테스트는 현실성이 떨어진다

-> 단일 클래스로 구성된 소프트웨어 시스템은 거의 없기 때문이다.

2. 잡을 수 없는 버그가 존재한다.

## 통합 테스트

단위 테스트가 시스템의 가장 작은 부분을 테스트한다면 통합 테스트는 우리의 코드와 외부 요소 간의 통합을 테스트해야할 때 사용하는 테스트 수준이다.

예를 들어 소프트웨어 시스템은 일반적으로 데이터베이스 시스템에 의존한다.

개발자는 이 외부 구성요소와의 상호작용만을 담당하는 클래스인 데이터 접근 객체 (Data Access Object)를 만든다.

DAO는 복잡한 SQL 코드를 포함하고 있을 수도 있다.

따라서 테스터는 SQL 쿼리를 테스트해야할 필요성을 느끼는데 SQL 쿼리가 제대로 작동하는지 보는 가장 좋은 방법은 데이터베이스에 쿼리를 제출하고 데이터베이스가 반환하는 내용을 확인하는것이다.

### 통합테스트에서 주의할점

통합 테스트는 단위 테스트에 비해 작성이 더 어렵다.

예를 들어 DB를 테스트하는 경우

1. 테스트에 사용할 디비 설정을 해야한다.

2. 디비를 매 테스트마다 테스트 기대 상태로 만들어야한다.

3. 테스트 목적만으로 격리된 디비 인스턴스가 필요하다.

## 시스템 테스트

소프트웨어를 더 실질적인 관점에서 더 현실적인 테스트를 수행하려면 시스템이 가진 전체 소프트웨어 시스템을 실행해야한다.

시스템이 내부에서 어떻게 동작하는지는 관심이 없고 어떤 입력일 때 어떤 출력이 나오는지만이 시스템 테스트의 관심사이다.

시스템 테스트의 명백한 이점은 테스트가 현실적이라는 것에 있다.

하지만 시스템 테스트는 단위 테스트에 비해 느릴 확률이 높고 작성하기 힘들 가능성이 높다.

또한 시스템 테스트는 불안정한 경향이 있다. 똑같은 설정임에도 불구하고 어떨 땐 통과하기도 어떨 땐 실패하기도 한다.

## 그럼 어케함??

상황에 따라 각 테스트피라미드에서 어떤 부분을 중점적으로 둘지는 달라질 수 있다.

필자의 경우에는 단위 테스트를 선호한다고 하는데 나도.. 단위 테스트를 많이 선호하는 편이다.

# 테스트의 범위보다 크기가 중요하다

구글은 테스트의 크기에 대한 정의를 하는데

작은 테스트, 중간 크기 테스트, 큰 테스트로 구분한다.

## 작은 테스트

단일 프로세스에서 실행가능한 테스트를 의미한다

## 중간 크기 테스트

여러 프로세스에 걸쳐 실행될 수 있고 스레드를 사용할 수 있으며 네트워크호출을 할 수 있다.

## 큰 테스트

로컬호스트라는 제한도 없애고 다른 컴퓨터를 호출할 수 있다.

# 후기

이런 세계가 있다는걸 지금 알게된게 너무 아쉽다. 더 탐독해보고싶다.