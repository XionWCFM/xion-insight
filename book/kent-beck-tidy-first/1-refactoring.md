# 코드 정리

1부에서 다루는 내용은 코드 정리에 대한 실전적인 방법론을 제시하는 내용이었습니다.

여기에서 저는 당연하지만 지키지 않게되는 원칙을 다시 한번 상기할 수 있었어요.

"동작 변경"에 대한 PR과 "코드 정리"에 대한 PR은 분리되어야하며 이 둘이 섞여있다면 우리는 힘들어질 수 있다.

즉 코드 정리로 인해 동작이 변경되게된다면 코드 정리 PR도 동작을 변경하는지 의심하면서 읽어야한다는 것입니다.


## 새로운 인터페이스로 기존 루틴 부르기

기존 레거시 코드를 활용해야하는 상황에서 기존 인터페이스가 혼란스럽거나, 지루한 경우를 많이 겪었습니다.

이런 경우 새로 만든 인터페이스로 구현체를 감싼 뒤 새로 만든 인터페이스에 의존하는 형태로 코드를 수정한 경험이 있는데요

이러한 내용을 "통로 인터페이스" (pass-through interface)라는 이름으로 부른다는 것을 알게되었어요

소프트웨어 설계에서 통로 인터페이스를 이용하여 설계하면 변경이 수월해진다고 하는데 정말 공감이 많이 되었습니다.

## 소프트웨어 설계는 작고 단순하고 쉬운 수준에서 해야한다.

챕터 11의 비슷한 코드끼리 내용을 보면 켄트벡의 경우에는 긴 코드 덩어리에서 구획이 나뉘어지는 느낌이 들었을 때

각 구획에 빈줄을 넣어 분리하는 코드정리를 좋아한다고 서술합니다.

예를 들면 이런 형태로 작성하는 거죠


before
```ts

const hi = 1
const hello = 2
const handleHello = () => {

}
```

after
```ts

const hi = 1
const hello = 2

const handleHello = () => {

}
```

코드의 동작은 전혀 달라지지 않았습니다. 변경도 매우 간단하죠 엔터 한번을 쳤을 뿐입니다.

하지만 코드를 읽는 입장에서는 관심사별로 구획이 나뉘어졌다는 인상을 받습니다.


## 하나의 더미

작은 코드 조각을 지향하면 코드를 한번에 조금씩 이해할 수 있고 이해하기가 쉽기 때문에 일반적으로 좋다.

라는 가설이 있지만 실제로 코드를 작성하다보면 작은 코드 조각들이 서로 상호작용하는 것을 알아채기 위해

구현을 찾아보는 뎁스가 늘어나게되어 오히려 코드를 더 알기 어렵게 되는 경험이 있었습니다.

이런 경험에 대해서도 책에서 다루고 있다는 것이 조금 놀라웠는데요

이런 경우엔 방향을 바꿔서 모든 것을 한곳에다가 모으기 시작한다고 합니다.

사실 클린코드라는 책이 유행하면서 다들 일단 생각없이 함수를 작게 만들고 뎁스를 과하게 많이 만드는 것 같다는 생각이 있었는데

그런 행동에서 기인하는 문제점들을 잘 짚어주는 것 같다라는 생각이 들었어요

